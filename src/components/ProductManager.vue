<template>
    <div class="container">
        <h2>ğŸ›’ å•†å“ç®¡ç†ç³»çµ±</h2>
        <form @submit.prevent="handleSubmit">
            <input v-model="form.name" :placeholder="'å•†å“åç¨±'" />
            <input v-model.number="form.price" type="number" :placeholder="'åƒ¹æ ¼'" />

            <button type="submit">æ–°å¢å•†å“</button>
        </form>
        <!-- <pre> {{ products }} </pre> -->

        <ProductChildItem v-for="product in products" :key="product.id" :product="product" />
    </div>
</template>

<script setup>

import { ref } from 'vue'
import ProductChildItem from './ProductChildItem.vue'
// å•†å“ç·¨è™Ÿ
let nextId = 1
const form = ref({
    id: 1,
    name: '',
    price: 1000
})


const products = ref([{
    id: nextId++,
    name: 'æ»‘é¼ ',
    price: 500,
},
{
    id: nextId++,
    name: 'éµç›¤',
    price: 800,
},
{
    id: nextId++,
    name: 'é¡¯ç¤ºå™¨',
    price: 3000,
},
])

const handleSubmit = () => {
    if (!form.value.name || !form.value.price) return

    products.value.push({
        id: nextId++,
        name: form.value.name,
        price: form.value.price
    })
    resetForm()
}

// é‡ç½®è¡¨å–®
function resetForm() {
    form.value = {
        id: null,
        name: '',
        price: 1000,
    }
}
</script>

<style scoped>
.container {
    max-width: 500px;
    margin: auto;
}

form {
    display: flex;
    flex-direction: column;
    gap: 8px;
    margin-bottom: 1rem;
}

input {
    padding: 6px;
}

button {
    padding: 6px 12px;
}
</style>